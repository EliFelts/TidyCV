<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eli Felts">

<title>Applying tidy data principles to Curriculum vitae</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="TidyCV_Blog_files/libs/clipboard/clipboard.min.js"></script>
<script src="TidyCV_Blog_files/libs/quarto-html/quarto.js"></script>
<script src="TidyCV_Blog_files/libs/quarto-html/popper.min.js"></script>
<script src="TidyCV_Blog_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="TidyCV_Blog_files/libs/quarto-html/anchor.min.js"></script>
<link href="TidyCV_Blog_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="TidyCV_Blog_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="TidyCV_Blog_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="TidyCV_Blog_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="TidyCV_Blog_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="TidyCV_Blog_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="TidyCV_Blog_files/libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a>
  <ul class="collapse">
  <li><a href="#a-couple-of-notes-before-diving-in" id="toc-a-couple-of-notes-before-diving-in" class="nav-link" data-scroll-target="#a-couple-of-notes-before-diving-in">A couple of notes before diving in</a></li>
  </ul></li>
  <li><a href="#spreadsheet-data" id="toc-spreadsheet-data" class="nav-link" data-scroll-target="#spreadsheet-data">Spreadsheet Data</a>
  <ul class="collapse">
  <li><a href="#standalone-data-types" id="toc-standalone-data-types" class="nav-link" data-scroll-target="#standalone-data-types">Standalone data types</a></li>
  <li><a href="#relational-data" id="toc-relational-data" class="nav-link" data-scroll-target="#relational-data">Relational Data</a></li>
  </ul></li>
  <li><a href="#citations" id="toc-citations" class="nav-link" data-scroll-target="#citations">Citations</a>
  <ul class="collapse">
  <li><a href="#peer-reviewed-publications" id="toc-peer-reviewed-publications" class="nav-link" data-scroll-target="#peer-reviewed-publications">Peer-reviewed publications</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Applying tidy data principles to Curriculum vitae</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Eli Felts </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors

Attaching package: 'vitae'


The following object is masked from 'package:stats':

    filter



Attaching package: 'flextable'


The following object is masked from 'package:purrr':

    compose</code></pre>
</div>
</div>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>I’m writing this blog post two weeks after being illegally fired as part of the nationwide termination of federal probationary employees. I had been in my position for ten months, and the furthest thing from my mind was keeping my CV up-to-date. As such, I found myself in a position that many do when they are in need of updating. That is, my most recent CV consisted of my application materials for the most recent job I applied for. That version lived in an amalgam of formats that were tailored to the specific job for which it was constructed. Similarly, some of the pieces of information within the CV were adjusted to match keywords in the job posting, and others were included because they were specified in the job application guidance.</p>
<p>Now that I had a little bit of time to update my materials, I started thinking about how I could make it easier on myself in the future. Over the last few years I’ve moved essentially all of my workflows into the R environment, and I thought there must be something there to help with this problem. As expected, the R community did not disappoint and I quickly found the excellent <code>vitae</code> package <span class="citation" data-cites="vitae">(<a href="#ref-vitae" role="doc-biblioref">O’Hara-Wild and Hyndman 2024</a>)</span> which provides useful, easy-to-understand functions for constructing elements of a CV, as well as some sharp-looking templates for rendering to a PDF document.</p>
<p>Pretty much as soon as I discovered <code>vitae</code> I started converting my existing, awful looking CV that lived in a Microsoft Word document over to a markdown file.</p>
<p>What I started to notice is that there are a few types of data, and common structures to those data that feed into the elements that a natural resource professional would want to include in their CV. The examples from <code>vitae</code> vignettes store much of this information within the markdown file that is then eventually rendered to a PDF. Something like the following for storing records of education.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>education.dat <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> Degree, <span class="sc">~</span> Year, <span class="sc">~</span> Institution, <span class="sc">~</span> Where,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Doctor of Philosophy, Wildlife and Fisheries Sciences"</span>, <span class="st">"2018"</span>, <span class="st">"South Dakota State University"</span>, <span class="st">"Brookings, SD"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Master of Science, Wildlife and Fisheries Sciences"</span>, <span class="st">"2013"</span>, <span class="st">"South Dakota State University"</span>, <span class="st">"Brookings, SD"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Bachelor of Science, Biology"</span>, <span class="st">"2010"</span>, <span class="st">"University of Wisconsin-Oshkosh"</span>, <span class="st">"Oshkosh, WI"</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This constructs a data frame that is structured like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>education.dat <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-d42c042c{}.cl-d429c978{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-d42aafe6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-d42ab914{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d42ab915{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-d42ab91e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-d42c042c"><thead><tr style="overflow-wrap:break-word;"><th class="cl-d42ab914"><p class="cl-d42aafe6"><span class="cl-d429c978">Degree</span></p></th><th class="cl-d42ab914"><p class="cl-d42aafe6"><span class="cl-d429c978">Year</span></p></th><th class="cl-d42ab914"><p class="cl-d42aafe6"><span class="cl-d429c978">Institution</span></p></th><th class="cl-d42ab914"><p class="cl-d42aafe6"><span class="cl-d429c978">Where</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">Doctor of Philosophy, Wildlife and Fisheries Sciences</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">2018</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">South Dakota State University</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">Brookings, SD</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">Master of Science, Wildlife and Fisheries Sciences</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">2013</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">South Dakota State University</span></p></td><td class="cl-d42ab915"><p class="cl-d42aafe6"><span class="cl-d429c978">Brookings, SD</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-d42ab91e"><p class="cl-d42aafe6"><span class="cl-d429c978">Bachelor of Science, Biology</span></p></td><td class="cl-d42ab91e"><p class="cl-d42aafe6"><span class="cl-d429c978">2010</span></p></td><td class="cl-d42ab91e"><p class="cl-d42aafe6"><span class="cl-d429c978">University of Wisconsin-Oshkosh</span></p></td><td class="cl-d42ab91e"><p class="cl-d42aafe6"><span class="cl-d429c978">Oshkosh, WI</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>This format is tailored to feed into <code>vitae</code> functions, specifically the <code>brief_entries()</code> and <code>detailed_entries()</code> functions that expect arguments for what, when, with, where, and why. This is a very good way to conceptualize the elements of a CV, but storing data specifically in this format means that the underlying information associated with your professional history is summarized and is not tidy <span class="citation" data-cites="wickham2014">(<a href="#ref-wickham2014" role="doc-biblioref">Wickham 2014</a>)</span>.</p>
<p>If you’re not familiar with the concept of tidy data, the basic principle is that when you’re organizing tabular data every row should represent an observation, every column should represent a variable, and each type of observational unit should have its own table <span class="citation" data-cites="wickham2014">(<a href="#ref-wickham2014" role="doc-biblioref">Wickham 2014</a>)</span>. The table of education in the snippet of code above shows a good example of untidy data. For example. the “Degree” column has multiple variables which would be more correctly identified as degree (Doctor of Philosophy) and major (Wildlife and Fisheries Sciences). The benefits of organizing data according to these principles are difficult to overstate.</p>
<p>The application to records representing your CV is a little bit of an unusual application of the tidy data paradigm, but I wanted to try it for 2 reasons:</p>
<ol type="1">
<li>I have yet to find a case where organizing information in tidy data format wasn’t enormously beneficial</li>
<li>I’m currently unemployed so I frankly have the time to do it</li>
</ol>
<p>My goal with this blog post is to identify some core data types that are associated with CVs, and provide recommendations for others to use. As I worked through my own CV update I realized there were two broad categories of information that needed to be split:</p>
<ol type="1">
<li>Basic information that can live in a flat file like a spreadsheet</li>
<li>Works such as peer-reviewed publications that are cited in research and have specific guidelines from publishers about formatting.</li>
</ol>
<p>In the first section I’ll identify several types of data that can be easily organized and stored in a spreadsheet. These data “types” can be thought of as different categories of observational units, so they will each be represented in a different table within that spreadsheet.</p>
<p>In the second section I’ll go into details of how to manage cited works using free software.</p>
<p>I’ll post a follow up, standalone blog for transferring the data we compile in this blog post to a rendered PDF output of a CV.</p>
<section id="a-couple-of-notes-before-diving-in" class="level3">
<h3 class="anchored" data-anchor-id="a-couple-of-notes-before-diving-in">A couple of notes before diving in</h3>
<p>To non-R users, the advice I have for structuring CV records, which relates to principles of tidy data and freely available citation managers, will be useful whether or not you eventually work with your data in R. If you have no intention of using R to construct your CV, the content of this blog can still be useful.</p>
<p>Throughout this document I will strongly encourage documenting the most specific form of data that you can for any given type. A good example is recording the specific date when a degree was conferred. Although it’s not conventional to include this level of specificity on a CV, there are times when you may need it, particularly for actual job applications. If you have the specific date it is trivial to convert that to a more conventionally used format, such as Month-Year, but it can be unnecessarily painful to dig through records and find the actual date your degree was conferred.</p>
<p>In the interest of brevity I’ve limited the data types in this blog post to those that a typical early-career natural resource professional would have as part of their CV. An academic applying for a faculty position will have many more data types such as funding awards, teaching experience, and mentored students. My aim is for the breadth of data types included here to provide a good template for an early career professional, and an easily extensible template for an academic of more specialized person to extend to fit their needs. With that said, I’m open to suggestions and happy to edit when necessary, so if you think something is missing or should be structured differently please create an issue on the GitHub page.</p>
</section>
</section>
<section id="spreadsheet-data" class="level2">
<h2 class="anchored" data-anchor-id="spreadsheet-data">Spreadsheet Data</h2>
<p>I mentioned above that basic information can live in a spreadsheet. While that’s true, I do recommend in some instances using related tables to reduce redundancy and simplify organization. I’ll first walk through stand alone data types and then talk about linking through related tables. If that sounds like gibberish right now, stick with it and I think the examples in that section will make it click.</p>
<section id="standalone-data-types" class="level3">
<h3 class="anchored" data-anchor-id="standalone-data-types">Standalone data types</h3>
<p>In the template spreadsheet that accompanies this post you can find an exhaustive list of the variables that may be relevant for each of these table types. Note that when you’re filling in your information you will likely not have anything for many of those variables, and you can simply leave those blank.</p>
<p>The standalone data types I’ve identified include</p>
<ul>
<li>Personal identifiers (name, address, email, LinkedIN account, etc.)</li>
<li>Education</li>
<li>Professional memberships (e.g.&nbsp;American Fisheries Society)</li>
<li>Awards/Recognition</li>
<li>Software competencies: I’ll note here that this was an aspect of my CV that I was uncertain of how to structure to best communicate to employers what I can do. The way I have it for now is to list the program (e.g.&nbsp;R) or platform (Microsoft Office) and have associated bullet points summarizing my competencies in those applications. I tried to make it so those bullet points described in plain english the categories of tasks that I could accomplish, especially within the R environment. For me, it was especially tricky when it comes to summarizing competencies around R. This is partly due to the vast amount of things that can be done in R, and partly because I was somewhat trying to guess what hiring managers may understand about R. For example, my guess is that most people in fisheries have at least some familiarity with R Shiny at this point, so I wanted to highlight that competency in particular. On the other hand, I use <code>leaflet</code> and <code>sf</code> extensively for working with spatial data, but I have a hunch that a fair amount of fisheries people don’t know what those are, so I simply kept a bullet point that indicates I know how to use R for spatial data analysis (i.e.&nbsp;<code>sf</code>) and mapping (i.e.&nbsp;<code>leaflet</code>). Obviously, by the amount of rambling here I am unsure on this topic, so please let me know what you think!</li>
</ul>
</section>
<section id="relational-data" class="level3">
<h3 class="anchored" data-anchor-id="relational-data">Relational Data</h3>
<p>The types with related sub-tables include:</p>
<ul>
<li><p>Work</p>
<ul>
<li>Work Details</li>
<li>References</li>
</ul></li>
</ul>
</section>
</section>
<section id="citations" class="level2">
<h2 class="anchored" data-anchor-id="citations">Citations</h2>
<p>Now we move into a special category of data. Anything that might be cited - e.g.&nbsp;peer-reviewed publications, technical reports, presentations, software - has established guidelines and associated software to conform to those guidelines. I strongly recommend tracking your personal records in a citation manager. Personally, I’ve found <a href="https://www.zotero.org" target="_blank">Zotero</a> to be exceptional. It’s free, syncs with an online account, allows you to attach full text copies, and integrates seamlessly with RMarkdown. My recommendation is to store any of your work that can be used as a citation into your Zotero library, and attach a full-text copy if at all possible. This advice applies outside of publications as well - for example, if you give a presentation in PowerPoint you can print your slides to a PDF and attach to the citation in Zotero.</p>
<p>The format most commonly used for creating bibliographies in a markdown environment is BibTex which is a plain-text file saved as a “.bib” extension. Exporting from Zotero to a bibtex file is very simple, and we’ll touch on that later in this section.</p>
<p>Zotero has the capacity to house a wide range of research outputs, but for the purposes of this blog I’m going to stick to the categories I would typically include in a CV I’m using to apply to a fisheries job, which include:</p>
<ul>
<li>Peer-reviewed publications</li>
<li>Technical reports</li>
<li>Conference presentations</li>
</ul>
<section id="peer-reviewed-publications" class="level3">
<h3 class="anchored" data-anchor-id="peer-reviewed-publications">Peer-reviewed publications</h3>
<p>These are classified as “Journal Article” under the item type field in Zotero. The relevant fields to go with a citation can be entered manually, or imported via the DOI. Typically, for managing references in general I copy the DOI and paste it into</p>

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-vitae" class="csl-entry" role="listitem">
O’Hara-Wild, Mitchell, and Rob Hyndman. 2024. <span>“Vitae: Curriculum Vitae for r Markdown.”</span> <a href="https://CRAN.R-project.org/package=vitae">https://CRAN.R-project.org/package=vitae</a>.
</div>
<div id="ref-wickham2014" class="csl-entry" role="listitem">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59: 1–23. <a href="https://www.jstatsoft.org/article/view/v059i10/0">https://www.jstatsoft.org/article/view/v059i10/0</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>